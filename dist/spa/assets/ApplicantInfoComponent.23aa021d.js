import{d as Q,r as u,a$ as $,o as p,c as h,w as o,a as s,aj as A,ak as y,u as B,s as d,Q as D,al as m,ah as b,b as k,ay as T}from"./index.5cacb10f.js";import{a as E,c as N,b as P}from"./QSpinnerHourglass.3d002817.js";import{Q as V}from"./QPage.ca4e0047.js";import{Q as G,_ as S,a as F}from"./DrawerAppBar.9c80f38c.js";import"./QChip.70763f59.js";const H={key:1,class:"spinner-container"},I={key:2},O=k("h3",null,"Error:",-1),q=Q({__name:"ApplicantInfoComponent",setup(U){const c=u(!1),l=u([]),v=u(null),t=u([]),_=async()=>{c.value=!0;try{t.value=[],l.value=[];const e=await d.axiosGetWithTimeout("https://18.214.47.239/backend/user.php?table=usuario&usertype=supervisor"),i=await d.axiosGetWithTimeout("https://18.214.47.239/backend/user.php?table=supervisor&activado=0"),n=[...e,...i],f=n.reduce((a,r)=>({...a,...r}),{}),C=n.reduce((a,r)=>({...a,[r.id]:{...a[r.id]||{},...r}}),{}),g=Object.values(C),x=Object.keys(f).map(a=>({name:a,align:"center",label:a.charAt(0).toUpperCase()+a.slice(1),field:a,sortable:!0}));t.value.splice(2,0,...x),l.value=g,l.value=l.value.filter(a=>a.activado),t.value=t.value.filter(a=>a.name!=="activado"),t.value.push({name:"actions",align:"center",label:"Aceptar",field:"actions"})}catch(e){v.value="Error al obtener la informaci\xF3n",console.error(e)}finally{c.value=!1}},w=async e=>{try{await d.axiosPut(`https://18.214.47.239/backend/user.php?table=supervisor&id=${e}`,{id:e,activado:"1"}),T("positive","Supervisor Activado"),_()}catch(i){console.log(i)}};return $(()=>{_()}),(e,i)=>(p(),h(G,{view:"hHh lpR fFf"},{default:o(()=>[s(S),s(F,null,{default:o(()=>[s(V,null,{default:o(()=>[A(y(B(d))+" ",1),c.value?m("",!0):(p(),h(E,{key:0,rows:l.value,columns:t.value,"row-key":"id",class:"my-sticky-last-column-table"},{top:o(()=>[]),"body-cell-actions":o(n=>[s(N,{props:n},{default:o(()=>[s(D,{color:"positive",icon:"check",onClick:f=>w(n.row.id)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"])),c.value?(p(),b("div",H,[s(P,{size:"50px",color:"primary"})])):m("",!0),v.value?(p(),b("div",I,[O,k("p",null,y(v.value),1)])):m("",!0)]),_:1})]),_:1})]),_:1}))}});export{q as default};
